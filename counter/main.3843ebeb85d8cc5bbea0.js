!function(){"use strict";class t{static#t={};on(e,n){return t.#t[e]||(t.#t[e]=[]),t.#t[e].push(n),n}off(e,n){t.#t[e]&&(t.#t[e]=t.#t[e].filter((t=>t!==n)))}emit(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];t.#t[e]&&t.#t[e].forEach((t=>{t(...s)}))}}class e extends t{constructor(t){let{parentNode:e=null,tag:n="div",className:s="",content:r="",attributes:o={}}=t;super();const i=document.createElement(n);i.className=s,i.innerHTML=r,e&&e.append(i),this.node=i,this.setAttributes(o)}remove(){this.node.remove()}append(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const s=e.map((t=>t instanceof HTMLElement?t:t.node));this.node.append(...s)}addListener(t,e){this.node.addEventListener(t,e)}setAttributes(t){Object.entries(t).forEach((t=>{let[e,n]=t;return this.node.setAttribute(e,n)}))}removeAttributes(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((t=>this.node.removeAttribute(t)))}setContent(t){this.node.textContent=t}addClass(){this.node.classList.add(...arguments)}removeClass(){this.node.classList.remove(...arguments)}toggleClass(t,e){this.node.classList.toggle(t,e)}}var n=new e({className:"header",tag:"header",content:'<h1 class="header-title">Counter</h1> '}),s=new e({className:"instructions",content:'<h3 class="instructions-title">Welcome to our counter!</h3> <p class="instructions">Click on the button... enjoy :D</p> '});class r extends e{constructor(t,e){let{content:n}=e;super({parentNode:t,className:"increase-button",content:n}),this.node.onclick=()=>this.handleClick()}handleClick(){this.emit("clickOnButton",this)}}const o="Gonch-Counter";class i extends e{constructor(t){super({parentNode:t,className:"counter"}),this.parentNode=t,this.counterAmount=0,this.init(),this.settings={darkTheme:!1},this.saveSettings(),this.getSettings(),this.on("clickOnButton",(()=>{this.increaseCounterAmount(),this.renderCounterAmount()})),this.on("changeTheme",(t=>this.changeTheme(t)))}increaseCounterAmount(){this.counterAmount+=1}renderCounterAmount(){this.counterAmountElement.setContent(this.counterAmount)}getSettings(){this.settings=function(t){const e=localStorage.getItem(`${o}-settings`);let n;try{n=JSON.parse(e)}catch(t){throw new Error("Error",t)}return e?n:null}()??{darkTheme:!1}}saveSettings(){var t;t=this.settings,localStorage.setItem(`${o}-settings`,JSON.stringify(t))}createCounter(){this.wrapper=new e({parentNode:this,className:"counter-wrapper"}),this.increaseButton=new r(this.wrapper,{content:"press me"}),this.counterAmountElement=new e({parentNode:this.wrapper,className:"counter-amount",content:this.counterAmount}),this.changeThemeButton=new e({parentNode:this.wrapper,className:"change-theme-button",tag:"button",content:"dark theme"}),this.changeThemeButton.addListener("click",(()=>{this.settings.darkTheme=!this.settings.darkTheme,this.emit("changeTheme",this.settings.darkTheme)}))}changeTheme(t){this.parentNode.toggleClass("theme-dark",t),this.settings.darkTheme=t,this.saveSettings()}init(){this.createCounter()}}const a=new e({parentNode:document.body,className:"root"});a.append(n,s),new class extends t{constructor(t){super(),this.parentNode=t}init(t){this.counter=new i(t)}}(a).init(a)}();